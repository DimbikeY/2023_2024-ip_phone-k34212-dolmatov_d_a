University: [ITMO University](https://itmo.ru/ru/)  
Faculty: [FICT](https://fict.itmo.ru)  
Course: [IP-telephony](https://itmo-ict-faculty.github.io/ip-telephony/)   
Year: 2023/2024  
Group: K34212  
Author: Dolmatov Dmitrii Alexeevich  
Lab: Lab2  
Date of create: 20.02.2023  
Date of finished: --.02.2023  

# Лабораторная работ №2 "Конфигурация voip в среде Сisco packet trace"  
## Описание  
Для выполнения данной лабораторной работы собирается схема соединения. Необходимо проверить, правильно ли подключены все узлы устройств. Предварительно удалить все преды- дущие конфигурационные файлы на маршрутизаторах Cisco 2811, на коммутаторе Cisco catalyst 3560  
## Цель работы  
Изучить рабочую среду Cisco Packet Tracer, ознакомить- ся с интерфейсами основных устройств, типами кабелей, научиться собирать топологию. Изучить построение сети IP-телефонии с помощью маршрутизатора, коммутатора и IP телефонов Cisco 7960 в среде Packet tracer  
### Ход работы  
#### 1-ая часть  
В ходе данной работы были выполнены похожие скрипты, что и в первой лабораторной работе. Отличие лишь в том, что мы установили пароли на сетевые устройства и отключили ввода DNS имени на неизвестную команду  
Проведём в этом задании возможность связи по ip-телефонии.    
Для этого нам необходим Router, на котором будет настроен DHCP сервер, необходимый для того, чтобы к IP-телефонам передался ip-адрес и номер телефона  

Стоит напомнить, что в DHCP интерфейс и сабинтерфейсы выключены по умолчанию  
Скрипт для настройки DHCP сервера  
> ip dhcp excluded-address 192.168.20.1 192.168.20.10  
> ip dhcp pool VOICE_POOL  
> network 192.168.20.0 255.255.255.0  
> default-router 192.168.20.10  
> option 150 ip 192.168.20.10  

Команда option 150 ip 192.168.20.10 используется в сетях VoIP (Voice over IP) для настройки DHCP-сервера на предоставление клиентам информации о том, где они могут найти серверы TFTP (Trivial File Transfer Protocol), которые используются для загрузки конфигурационных файлов для IP-телефонов 
То же самое сделаем и для 10-влана  

Далее перейдем к настрйоке ip-телефоном на роутере  
> telephony-services
> max-dn 3 (кол-во номеров макс)
> max-ephones (кол-во телефонов макс)
> ip source-address 192.168.20.10 port 2000 (тот же, что и сабинтерфейс роутера)

Далее настраиваем телефоны по очереди:  
> ephone-dn 1
> number 1010
> exit
> ephone 1
> type 7960 (всегда так)
> button 1:1 (заранее должно быть DHCP соединение с оконечными устройствами)
> и так делаем с каждым телефоном, меняя button 1:N, где N - номер устройства
В результате выполнения данной лабораторной работы были изучены основы подключения ip-телефоном (не забываем команду switchport voice vlan NN), а также изучен материал по использованию роутера с DHCP сервером, который одновременно является сервером TFTP для корректной связности IP-телефонов.

Отключение поиска по DNS: ![Поиск](https://github.com/DimbikeY/2023_2024-ip_telephony-k34212-dolmatov_d_a/blob/main/lab2/screens/Снимок%20экрана%202024-02-19%20234904.png)  

Установка пароля на сетевые устройства: ![Пароль](https://github.com/DimbikeY/2023_2024-ip_telephony-k34212-dolmatov_d_a/blob/main/lab2/screens/Снимок%20экрана%202024-02-19%20235152.png)  

Проверка связности: ![Связность](https://github.com/DimbikeY/2023_2024-ip_telephony-k34212-dolmatov_d_a/blob/main/lab2/screens/Снимок%20экрана%202024-02-19%20235847.png)  

### 2-ая часть
В принципе, часть этой работы схожа с прошлой. Только вместо этого у нас добавляется ещё один VLAN: это компьютеры  
Сама конфигурация особо не отличилась: на коммутаторе добавим 
> switchport mode access
> switchport access vlan 10 (PC)
> switchport voice vlan 20 (Voice)
Также установим DHCP Pool как для ПК, так и для телефонов
Остальная конфигурация не изменяется
Проверка работы DHCP: ![DHCP](https://github.com/DimbikeY/2023_2024-ip_telephony-k34212-dolmatov_d_a/blob/main/lab2/screens/Снимок%20экрана%202024-02-20%20004046.png)

Проверка связности: ![Связность](https://github.com/DimbikeY/2023_2024-ip_telephony-k34212-dolmatov_d_a/blob/main/lab2/screens/Снимок%20экрана%202024-02-19%20235847.png)  

Схема: ![Схема](https://github.com/DimbikeY/2023_2024-ip_telephony-k34212-dolmatov_d_a/blob/main/lab2/screens/Снимок%20экрана%202024-02-20%20003238.png)  

## Вывод  
В результате выполнения данной лабораторной работы были изучены основы подключения ip-телефоном (не забываем команду switchport voice vlan NN), а также изучен материал по использованию роутера с DHCP сервером, который одновременно является сервером TFTP для корректной связности IP-телефонов.
